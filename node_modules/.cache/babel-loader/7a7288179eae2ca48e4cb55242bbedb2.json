{"ast":null,"code":"import _defineProperty from \"/home/biangacila/reactprojects/PmisGov/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/home/biangacila/reactprojects/PmisGov/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/biangacila/reactprojects/PmisGov/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/biangacila/reactprojects/PmisGov/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/biangacila/reactprojects/PmisGov/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/biangacila/reactprojects/PmisGov/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/biangacila/reactprojects/PmisGov/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/biangacila/reactprojects/PmisGov/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/biangacila/reactprojects/PmisGov/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/biangacila/reactprojects/PmisGov/src/component/employee/filtering.js\";\nimport React from 'react';\nimport { PostMainPMIS, PostGovPMIS, PostRecordPMIS } from '../../api/auth';\n\nvar FilteringContract =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(FilteringContract, _React$Component);\n\n  function FilteringContract(props) {\n    var _this2;\n\n    _classCallCheck(this, FilteringContract);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(FilteringContract).call(this, props));\n    _this2.fetchContract =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var _this, hub, endpoint;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this = _assertThisInitialized(_assertThisInitialized(_this2));\n              hub = {};\n              endpoint = \"/api/contract/list\"; // \"/api/contracts/information/list\n\n              _context.next = 5;\n              return PostMainPMIS(hub, endpoint, function (data) {\n                var lsProvince = {};\n\n                for (var i in data) {\n                  var row = data[i];\n                  lsProvince[row.Province] = true;\n                }\n\n                var ls = [];\n\n                for (var _i in lsProvince) {\n                  ls.push(_i);\n                }\n\n                _this.setState({\n                  ListContract: data,\n                  ComboProvince: ls\n                });\n\n                console.log(\":> ListContract > \", ls, data);\n              });\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    _this2.handleInput = function (e, key) {\n      _this2.setState(_defineProperty({}, key, e.target.value));\n\n      _this2.props.handleInput(e, key);\n    };\n\n    _this2.getValue = function (key) {\n      if (typeof _this2.state[key] === \"undefined\") {\n        return \"\";\n      }\n\n      return _this2.state[key];\n    };\n\n    _this2.renderMunicipality = function () {\n      var municipalities = [];\n      var ls = {};\n\n      for (var i in _this2.state.ListContract) {\n        var row = _this2.state.ListContract[i]; // Municipality\n\n        if (row.Province === _this2.state.province) {\n          ls[row.Municipality] = true;\n        }\n      }\n\n      for (var _i2 in ls) {\n        municipalities.push(_i2);\n      }\n\n      if (municipalities.length === 0) {\n        return React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        }, \"Waiting for Municipality selecting ...\");\n      }\n\n      return React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, \"Province\"), React.createElement(\"select\", {\n        className: \"form-control\",\n        required: true,\n        onChange: function onChange(e) {\n          return _this2.handleInput(e, \"municipality\");\n        },\n        value: _this2.getValue(\"municipality\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, \"--Select Province --\"), municipalities.map(function (item, index) {\n        return React.createElement(\"option\", {\n          key: index,\n          value: item,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, item);\n      })));\n    };\n\n    _this2.renderProvince = function () {\n      console.log(\":> renderProvince > \", _this2.state.ComboProvince.length);\n\n      if (_this2.state.ComboProvince.length === 0) {\n        return React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115\n          },\n          __self: this\n        }, \"Waiting for province list ...\");\n      }\n\n      return React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, \"Province\"), React.createElement(\"select\", {\n        className: \"form-control\",\n        required: true,\n        onChange: function onChange(e) {\n          return _this2.handleInput(e, \"province\");\n        },\n        value: _this2.getValue(\"province\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, \"--Select Province --\"), _this2.state.ComboProvince.map(function (item, index) {\n        return React.createElement(\"option\", {\n          key: index,\n          value: item,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131\n          },\n          __self: this\n        }, item);\n      })));\n    };\n\n    _this2.state = {\n      province: \"\",\n      municipality: \"\",\n      company: \"\",\n      contract: \"\",\n      ListContract: [],\n      ListOrganization: [],\n      ComboProvince: []\n    };\n    return _this2;\n  }\n\n  _createClass(FilteringContract, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.fetchContract();\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, \"filtering request\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, this.renderProvince()), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, this.renderMunicipality()));\n    }\n  }]);\n\n  return FilteringContract;\n}(React.Component);\n\nexport { FilteringContract as default };","map":{"version":3,"sources":["/home/biangacila/reactprojects/PmisGov/src/component/employee/filtering.js"],"names":["React","PostMainPMIS","PostGovPMIS","PostRecordPMIS","FilteringContract","props","fetchContract","_this","hub","endpoint","data","lsProvince","i","row","Province","ls","push","setState","ListContract","ComboProvince","console","log","handleInput","e","key","target","value","getValue","state","renderMunicipality","municipalities","province","Municipality","length","map","item","index","renderProvince","municipality","company","contract","ListOrganization","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {PostMainPMIS, PostGovPMIS, PostRecordPMIS} from '../../api/auth';\n\nexport default class FilteringContract extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            province: \"\",\n            municipality: \"\",\n            company: \"\",\n            contract: \"\",\n            ListContract: [],\n            ListOrganization: [],\n            ComboProvince: [],\n        }\n    }\n\n    async componentDidMount() {\n        await this.fetchContract();\n        //await this.fetchOrganization();\n    }\n\n    fetchContract = async () => {\n        let _this = this;\n\n        let hub = {}\n        const endpoint = \"/api/contract/list\"; // \"/api/contracts/information/list\n        await PostMainPMIS(hub, endpoint, function (data) {\n\n            let lsProvince = {};\n            for (let i in data) {\n                const row = data[i];\n                lsProvince[row.Province] = true;\n            }\n            let ls = [];\n            for (let i in lsProvince) {\n                ls.push(i)\n            }\n            _this.setState({ListContract: data, ComboProvince: ls});\n\n            console.log(\":> ListContract > \", ls, data);\n        })\n\n    }\n    /*fetchOrganization = async () => {\n        let _this = this;\n\n        let hub = {}\n        const endpoint = \"/api/organisation/list\";\n        await PostMainPMIS(hub, endpoint, function (data) {\n            console.log(\":> ListOrganization > \", data);\n            _this.setState({ListOrganization: data})\n        })\n\n    }*/\n\n    handleInput=(e,key)=>{\n        this.setState({[key]:e.target.value});\n        this.props.handleInput(e,key);\n    }\n    getValue=(key)=>{\n        if(typeof this.state[key] ===\"undefined\"){\n            return \"\";\n        }\n        return this.state[key]\n    }\n\n    renderMunicipality=()=>{\n        let municipalities = [];\n        let ls  = {};\n        for(let i in this.state.ListContract){\n            const row =this.state.ListContract[i]; // Municipality\n            if(row.Province ===this.state.province){\n                ls[row.Municipality] = true;\n            }\n        }\n\n        for(let i in ls){\n            municipalities.push(i)\n        }\n\n        if(municipalities.length ===0){\n            return (<p>Waiting for Municipality selecting ...</p>)\n        }\n\n        return(\n            <div className=\"form-group\">\n                <label>Province</label>\n                <select\n                    className=\"form-control\"\n                    required={true}\n                    onChange={(e) => this.handleInput(e, \"municipality\")}\n                    value={this.getValue(\"municipality\")}\n                >\n                    <option>--Select Province --</option>\n                    {municipalities.map((item,index)=>{\n                        return(\n                            <option key={index} value={item}>{item}</option>\n                        )\n                    })}\n                </select>\n\n            </div>\n        )\n\n    }\n\n\n    renderProvince =()=> {\n        console.log(\":> renderProvince > \", this.state.ComboProvince.length );\n        if(this.state.ComboProvince.length === 0){\n            return(\n                <p>Waiting for province list ...</p>\n            )\n        }\n\n        return(\n            <div className=\"form-group\">\n                <label>Province</label>\n                <select\n                    className=\"form-control\"\n                    required={true}\n                    onChange={(e) => this.handleInput(e, \"province\")}\n                    value={this.getValue(\"province\")}\n                >\n                    <option>--Select Province --</option>\n                    {this.state.ComboProvince.map((item,index)=>{\n                        return(\n                            <option key={index} value={item}>{item}</option>\n                        )\n                    })}\n                </select>\n\n            </div>\n        )\n    }\n\n    render() {\n        return (\n            <div className=\"\">\n                <h2>filtering request</h2>\n                <div>\n                    {this.renderProvince()}\n                </div>\n                <div>\n                    {this.renderMunicipality()}\n                </div>\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}