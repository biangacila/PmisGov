{"ast":null,"code":"import _regeneratorRuntime from \"/home/biangacila/reactprojects/easi-fleet-web/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/home/biangacila/reactprojects/easi-fleet-web/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _asyncToGenerator from \"/home/biangacila/reactprojects/easi-fleet-web/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/home/biangacila/reactprojects/easi-fleet-web/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/biangacila/reactprojects/easi-fleet-web/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/biangacila/reactprojects/easi-fleet-web/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/biangacila/reactprojects/easi-fleet-web/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/biangacila/reactprojects/easi-fleet-web/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/biangacila/reactprojects/easi-fleet-web/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/biangacila/reactprojects/easi-fleet-web/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/biangacila/reactprojects/easi-fleet-web/src/component/register.js\";\nimport React, { Component } from 'react';\nimport '../asset/css/login.css';\nimport '../asset/css/global.css';\nimport { CheckLogin, PostRequestHTTP, SaveToStorage } from '../api/services';\n\nvar LoginComponent =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(LoginComponent, _Component);\n\n  function LoginComponent(props) {\n    var _this2;\n\n    _classCallCheck(this, LoginComponent);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(LoginComponent).call(this, props));\n\n    _this2.getInputValue = function (key) {\n      if (typeof _this2.state[key] !== \"undefined\") {\n        return _this2.state[key];\n      }\n\n      return \"\";\n    };\n\n    _this2.handleInput = function (e, key) {\n      var val = e.target.value;\n\n      _this2.setState(_defineProperty({}, key, val));\n    };\n\n    _this2.renderInputForm = function () {\n      var ls = [{\n        field: \"email\",\n        placeholder: \"Email Address\",\n        required: true,\n        type: \"email\"\n      }, {\n        field: \"password\",\n        placeholder: \"Password\",\n        required: true,\n        type: \"password\"\n      }, {\n        field: \"confirmPassword\",\n        placeholder: \"Confirm Password\",\n        required: true,\n        type: \"password\"\n      }, {\n        field: \"name\",\n        placeholder: \"First Name\",\n        required: true,\n        type: \"text\"\n      }, {\n        field: \"surname\",\n        placeholder: \"Last Name\",\n        required: true,\n        type: \"text\"\n      }, {\n        field: \"fullname\",\n        placeholder: \"Full Name\",\n        required: true,\n        type: \"text\"\n      }, {\n        field: \"phone\",\n        placeholder: \"Phone Number\",\n        required: true,\n        type: \"text\"\n      }, {\n        field: \"country\",\n        placeholder: \"Country e.g ZA for South-Africa\",\n        required: true,\n        type: \"text\"\n      }, {\n        field: \"province\",\n        placeholder: \"Province\",\n        required: true,\n        type: \"text\"\n      }, {\n        field: \"city\",\n        placeholder: \"City\",\n        required: true,\n        type: \"text\"\n      }, {\n        field: \"Suburb\",\n        placeholder: \"Suburb\",\n        required: true,\n        type: \"text\"\n      }];\n      return ls.map(function (row, index) {\n        return React.createElement(\"div\", {\n          className: \"form-group\",\n          key: row.field,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: row.type,\n          name: row.field,\n          id: row.field,\n          tabIndex: index,\n          className: \"form-control\",\n          placeholder: row.placeholder,\n          value: _this2.getInputValue(row.field),\n          onChange: function onChange(e) {\n            return _this2.handleInput(e, row.field);\n          },\n          required: row.required,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }));\n      });\n    };\n\n    _this2.state = {};\n    _this2.submitForm = _this2.submitForm.bind(_assertThisInitialized(_assertThisInitialized(_this2)));\n    return _this2;\n  }\n\n  _createClass(LoginComponent, [{\n    key: \"submitForm\",\n    value: function () {\n      var _submitForm = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e) {\n        var cleanInputUsername, endpoint, hub;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n\n                if (!(this.state.password !== this.state.confirmPassword)) {\n                  _context.next = 4;\n                  break;\n                }\n\n                alert(\"Error ! Password doesn't match\");\n                return _context.abrupt(\"return\");\n\n              case 4:\n                cleanInputUsername = function cleanInputUsername(inData) {\n                  var data = inData.replace(\" \", \"\");\n                  data = data.toLocaleLowerCase();\n                  return data;\n                };\n\n                endpoint = \"/api/account/login\";\n                hub = this.state;\n                hub.username = cleanInputUsername(this.state.username);\n                hub.password = this.state.password.trim();\n                console.log(\"submitLogin > \", hub, endpoint);\n                _context.next = 12;\n                return PostRequestHTTP(hub, endpoint, function (data) {\n                  console.log(\"submitLogin response > \", data);\n\n                  if (data.Status === \"OK\") {\n                    if (data.User.Status !== \"active\") {\n                      alert(\"Your account is not active please confirm your email by clicking on the link!\");\n                      return;\n                    }\n\n                    alert(\"Login Success, welcome\"); //todo let set our token\n\n                    var token = data.Token;\n                    SaveToStorage(\"token\", token);\n                    SaveToStorage(\"user\", JSON.stringify(data.User));\n                    navigate('Home', _objectSpread({}, _this.props));\n                  } else {\n                    alert(\"Login Failed, please try again\"); // window.location.reload() ;\n                  }\n                });\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function submitForm(_x) {\n        return _submitForm.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"container registerContentBox\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-6 col-md-offset-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"panel panel-login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"panel-heading\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-xs-12 myTitleLogin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, \"Fleet Management System\")), React.createElement(\"div\", {\n        className: \"col-xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"#\",\n        className: \"active\",\n        id: \"login-form-link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, \"New user Registration\"))), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"panel-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-lg-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        id: \"register-form\",\n        onSubmit: this.submitForm,\n        role: \"form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, this.renderInputForm(), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-sm-6 col-sm-offset-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"submit\",\n        name: \"register-submit\",\n        id: \"register-submit\",\n        tabIndex: \"4\",\n        className: \"form-control btn btn-register\",\n        value: \"Register Now\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }))))))))))));\n    }\n  }]);\n\n  return LoginComponent;\n}(Component);\n\nexport { LoginComponent as default };","map":{"version":3,"sources":["/home/biangacila/reactprojects/easi-fleet-web/src/component/register.js"],"names":["React","Component","CheckLogin","PostRequestHTTP","SaveToStorage","LoginComponent","props","getInputValue","key","state","handleInput","e","val","target","value","setState","renderInputForm","ls","field","placeholder","required","type","map","row","index","submitForm","bind","preventDefault","password","confirmPassword","alert","cleanInputUsername","inData","data","replace","toLocaleLowerCase","endpoint","hub","username","trim","console","log","Status","User","token","Token","JSON","stringify","navigate","_this"],"mappings":"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","sourcesContent":["\nimport React,{Component} from 'react';\nimport '../asset/css/login.css';\nimport '../asset/css/global.css';\nimport {CheckLogin, PostRequestHTTP, SaveToStorage} from '../api/services';\n\nexport default class LoginComponent extends Component {\n\n    constructor(props){\n        super(props)\n        this.state={\n\n        }\n\n        this.submitForm=this.submitForm.bind(this);\n    }\n\n   async submitForm(e){\n        e.preventDefault();\n        if(this.state.password !==this.state.confirmPassword){\n            alert(\"Error ! Password doesn't match\");\n            return\n        }\n\n        const cleanInputUsername = (inData) => {\n            let data = inData.replace(\" \", \"\");\n            data = data.toLocaleLowerCase();\n            return data;\n        }\n        let endpoint = \"/api/account/login\";\n\n       let hub =this.state;\n\n        hub.username = cleanInputUsername(this.state.username);\n           hub.password = this.state.password.trim();\n\n        console.log(\"submitLogin > \", hub, endpoint);\n\n        await PostRequestHTTP(hub, endpoint, function (data) {\n            console.log(\"submitLogin response > \", data);\n            if (data.Status === \"OK\") {\n                if (data.User.Status !== \"active\") {\n                    alert(\"Your account is not active please confirm your email by clicking on the link!\");\n                    return\n                }\n                alert(\"Login Success, welcome\");\n                //todo let set our token\n                const token = data.Token;\n\n                SaveToStorage(\"token\", token);\n                SaveToStorage(\"user\", JSON.stringify(data.User));\n                navigate('Home', {..._this.props})\n\n            } else {\n                alert(\"Login Failed, please try again\");\n                // window.location.reload() ;\n            }\n\n        });\n\n    }\n\n    getInputValue=(key)=>{\n        if(typeof this.state[key] !==\"undefined\"){\n            return this.state[key]\n        }\n        return \"\";\n    }\n    handleInput=(e,key)=>{\n        const val  = e.target.value;\n        this.setState({[key]:val});\n    }\n    renderInputForm=()=>{\n        let ls=[\n            {field:\"email\",placeholder:\"Email Address\",required:true,type:\"email\"},\n            {field:\"password\",placeholder:\"Password\",required:true,type:\"password\"},\n            {field:\"confirmPassword\",placeholder:\"Confirm Password\",required:true,type:\"password\"},\n            {field:\"name\",placeholder:\"First Name\",required:true,type:\"text\"},\n            {field:\"surname\",placeholder:\"Last Name\",required:true,type:\"text\"},\n            {field:\"fullname\",placeholder:\"Full Name\",required:true,type:\"text\"},\n            {field:\"phone\",placeholder:\"Phone Number\",required:true,type:\"text\"},\n            {field:\"country\",placeholder:\"Country e.g ZA for South-Africa\",required:true,type:\"text\"},\n            {field:\"province\",placeholder:\"Province\",required:true,type:\"text\"},\n            {field:\"city\",placeholder:\"City\",required:true,type:\"text\"},\n            {field:\"Suburb\",placeholder:\"Suburb\",required:true,type:\"text\"},\n        ];\n\n        return ls.map((row,index)=>{\n            return (\n                <div className=\"form-group\" key={row.field}>\n                    <input\n                        type={row.type}\n                        name={row.field}\n                        id={row.field}\n                        tabIndex={index}\n                        className=\"form-control\"\n                        placeholder={row.placeholder}\n                        value={this.getInputValue(row.field)}\n                        onChange={(e)=>this.handleInput(e,row.field)}\n                        required={row.required}\n                    />\n\n                </div>\n            )\n        })\n    }\n    render() {\n        return (\n\n\n            <div className=\"container registerContentBox\">\n                <div className=\"row\">\n                    <div className=\"col-md-6 col-md-offset-3\">\n                        <div className=\"panel panel-login\">\n                            <div className=\"panel-heading\">\n                                <div className=\"row\">\n                                    <div className=\"row\">\n                                        <div className=\"col-xs-12 myTitleLogin\">\n                                            Fleet Management System\n                                        </div>\n                                    </div>\n                                    <div className=\"col-xs-12\">\n                                        <a href=\"#\" className=\"active\" id=\"login-form-link\">New user Registration</a>\n                                    </div>\n                                </div>\n                                <hr />\n                            </div>\n                            <div className=\"panel-body\">\n                                <div className=\"row\">\n                                    <div className=\"col-lg-12\" >\n\n                                        <form id=\"register-form\" onSubmit={this.submitForm} role=\"form\" >\n\n                                            {this.renderInputForm()}\n\n                                            {/*<div className=\"form-group\">\n                                                <input type=\"text\" name=\"username\" id=\"username\" tabIndex=\"1\"\n                                                       className=\"form-control\" placeholder=\"Username\" value=\"\" />\n                                            </div>\n                                            <div className=\"form-group\">\n                                                <input type=\"email\" name=\"email\" id=\"email\" tabIndex=\"1\"\n                                                       className=\"form-control\" placeholder=\"Email Address\"\n                                                       value=\"\" />\n                                            </div>\n                                            <div className=\"form-group\" >\n                                                <input type=\"password\" name=\"password\" id=\"password\" tabIndex=\"2\"\n                                                       className=\"form-control\" placeholder=\"Password\" />\n                                            </div>\n                                            <div className=\"form-group\">\n                                                <input type=\"password\" name=\"confirm-password\" id=\"confirm-password\"\n                                                       tabIndex=\"2\" className=\"form-control\"\n                                                       placeholder=\"Confirm Password\" />\n                                            </div>*/}\n                                            <div className=\"form-group\">\n                                                <div className=\"row\">\n                                                    <div className=\"col-sm-6 col-sm-offset-3\">\n                                                        <input type=\"submit\" name=\"register-submit\"\n                                                               id=\"register-submit\" tabIndex=\"4\"\n                                                               className=\"form-control btn btn-register\"\n                                                               value=\"Register Now\" />\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </form>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n            </div>\n\n\n\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}